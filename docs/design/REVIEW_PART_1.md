Findings
- High: `ConstraintSet::SubtractJacobianTerms` assumes `SetJacobianFlatIds()` was called; if not, `jacobian_flat_ids_` is empty and `flat_ids` dereference is undefined, which can crash or corrupt Jacobian updates. Consider guarding or asserting initialization, or computing flat IDs on demand. (`include/micm/constraint/constraint_set.hpp:231`)
- Medium: `EquilibriumConstraint::Jacobian` only special-cases `conc == 0` for `stoich == 1`, and otherwise returns 0. With fractional stoichiometries (allowed by `Yield`), the derivative at zero is undefined/infinite, and for negative concentrations `std::pow` can yield NaNs. This can silently destabilize DAE solves unless inputs are clamped or integer-only stoichiometry is enforced. (`include/micm/constraint/equilibrium_constraint.hpp:170`)
- Low: `Constraint`/`EquilibriumConstraint` expose mutable dependency/reactant/product data publicly, but internal index vectors are built once in the constructor. Mutating these fields after constructing a `ConstraintSet` will desynchronize dependency indices and yield incorrect residuals/Jacobians. Consider making these fields immutable or documenting invariants. (`include/micm/constraint/constraint.hpp:23`, `include/micm/constraint/equilibrium_constraint.hpp:29`)

Tests
- Missing coverage for zero-concentration branches and fractional stoichiometries in `EquilibriumConstraint::Jacobian`/`Residual`. (`test/unit/constraint/test_constraint.cpp`)
- Missing coverage for calling `ConstraintSet::SubtractJacobianTerms` without `SetJacobianFlatIds`, or for stale flat IDs after Jacobian structure changes. (`test/unit/constraint/test_constraint_set.cpp`)

Questions / Assumptions
- Are constraint stoichiometries guaranteed to be positive integers and concentrations clamped non-negative before constraints are evaluated? If so, it would be good to document or enforce that to avoid the zero/negative edge cases above.

Change Summary
- Reviewed constraint base class, equilibrium constraint, constraint set API surface, and unit tests for DAE support.

Meta
- Original unit tests generated by Claude Opus 4.5 Max.
- PR is split into 3 parts; this branch is part 1.
- Review authored by Codex 5.2 (High).
